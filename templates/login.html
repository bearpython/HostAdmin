<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>SCT-后台系统</title>
<link href="/static/css/login_css.css" rel="stylesheet" type="text/css" />

</head>
<body>
    <div id="login_center">
        <div id="login_area">
            <div id="login_box">
                <div id="login_form">
                    <form id="submitForm" action=""  method="post">
                        {% csrf_token %}
                        <div id="login_tip">
                            <span id="login_err" class="sty_txt2"></span>
                        </div>
                        <div>
                             用户名：<input type="text" name="userEntity.userCode" class="username" id="name" />
                        </div>
                        <div>
                            密&nbsp;&nbsp;&nbsp;&nbsp;码：<input type="password" name="userEntity.password" class="pwd" id="pwd" onkeypress="EnterPress(event)" onkeydown="EnterPress()">
                        </div>
                        <div id="btn_area">
                            <div>
                                <input type="button" class="login_btn" id="login_sub"  value="登  录" />
                                <input type="reset" class="login_btn" id="login_ret" value="重 置" />
                                <input type="checkbox" name="rmb" value="1" />记住我
                            </div>
                            <div style="color: red;">{{ error_msg }}</div>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
    <script src="/static/js/jquery-1.12.4.js"></script>
    <script src="/static/js/jquery.cookie.js"></script>
    <script type="text/javascript" src="/static/js/jquery-1.7.1.js"></script>
    <script type="text/javascript">
	$(document).ready(function(){
		$("#login_sub").click(function(){
			$("#submitForm").attr("action",'/app01/login/').submit();
		});
	});

	/*回车事件*/
	function EnterPress(e){ //传入 event
		var e = e || window.event;
		if(e.keyCode == 13){
			$("#submitForm").attr("action", "index.html").submit();
		}
	}

        //CSRF认证
    {#    function csrfSafeMethod(method) {#}
    {#        // these HTTP methods do not require CSRF protection#}
    {#        return (/^(GET|HEAD|OPTIONS|TRACE)$/.test(method));#}
    {#        }#}
    {#        $(function () {#}
    {#            $.ajaxSetup({#}
    {#                beforeSend:function (xhr,settings) {   //xhr是XMLHttpRequest对象#}
    {#                    if (!csrfSafeMethod(settings.type) && !this.crossDomain) {#}
    {#                        xhr.setRequestHeader('X-CSRFtoken', $.cookie('csrftoken'));  //这样写上之后就把这个页面的所有ajax请求都加上csrf的请求头了#}
    {#                    }#}
    {#                }#}
    {#            });#}
    {#        })#}
    </script>
</body>
</html>